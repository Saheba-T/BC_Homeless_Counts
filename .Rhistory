line = element_blank(),
axis.title = element_blank(),
axis.text.x = element_blank(),
axis.text.y = element_text(size = 12,),
plot.title = element_text(size = 15, hjust = -2)) +
coord_flip()
satisfaction %>%
ggplot(aes(x = reorder(ï..Service,avg_member_satisfaction),
y = avg_member_satisfaction,
fill = ï..Service,
label = scales::percent(avg_member_satisfaction/100))) +
geom_col() +
scale_fill_manual(values = c('#f5bf42',"#e0582f","#27b850","#b9cf59"),
name = "Service Provided") +
geom_text(nudge_y = -5,
color = "white",
fontface = "bold",
size = 5) +
labs(title = "Top Ranking of Services provided Based on Customer Satisfaction",
caption = "Note: The data used for this image is not actual, but generated for visual purposes") +
theme_classic() +
theme(legend.position = "none",
line = element_blank(),
axis.title = element_blank(),
axis.text.x = element_blank(),
axis.text.y = element_text(size = 12,),
plot.title = element_text(size = 15, hjust = -2)) +
coord_flip()
satisfaction %>%
ggplot(aes(x = reorder(ï..Service,avg_member_satisfaction),
y = avg_member_satisfaction,
fill = ï..Service,
label = scales::percent(round(avg_member_satisfaction/100,2)))) +
geom_col() +
scale_fill_manual(values = c('#f5bf42',"#e0582f","#27b850","#b9cf59"),
name = "Service Provided") +
geom_text(nudge_y = -5,
color = "white",
fontface = "bold",
size = 5) +
labs(title = "Top Ranking of Services provided Based on Customer Satisfaction",
caption = "Note: The data used for this image is not actual, but generated for visual purposes") +
theme_classic() +
theme(legend.position = "none",
line = element_blank(),
axis.title = element_blank(),
axis.text.x = element_blank(),
axis.text.y = element_text(size = 12,),
plot.title = element_text(size = 15, hjust = -2)) +
coord_flip()
satisfaction %>%
ggplot(aes(x = reorder(ï..Service,avg_member_satisfaction),
y = avg_member_satisfaction,
fill = ï..Service,
label = scales::percent(round(avg_member_satisfaction/100,3)))) +
geom_col() +
scale_fill_manual(values = c('#f5bf42',"#e0582f","#27b850","#b9cf59"),
name = "Service Provided") +
geom_text(nudge_y = -5,
color = "white",
fontface = "bold",
size = 5) +
labs(title = "Top Ranking of Services provided Based on Customer Satisfaction",
caption = "Note: The data used for this image is not actual, but generated for visual purposes") +
theme_classic() +
theme(legend.position = "none",
line = element_blank(),
axis.title = element_blank(),
axis.text.x = element_blank(),
axis.text.y = element_text(size = 12,),
plot.title = element_text(size = 15, hjust = -2)) +
coord_flip()
satisfaction %>%
ggplot(aes(x = reorder(ï..Service,avg_member_satisfaction),
y = avg_member_satisfaction,
fill = ï..Service,
label = scales::percent(round(avg_member_satisfaction/100,4)))) +
geom_col() +
scale_fill_manual(values = c('#f5bf42',"#e0582f","#27b850","#b9cf59"),
name = "Service Provided") +
geom_text(nudge_y = -5,
color = "white",
fontface = "bold",
size = 5) +
labs(title = "Top Ranking of Services provided Based on Customer Satisfaction",
caption = "Note: The data used for this image is not actual, but generated for visual purposes") +
theme_classic() +
theme(legend.position = "none",
line = element_blank(),
axis.title = element_blank(),
axis.text.x = element_blank(),
axis.text.y = element_text(size = 12,),
plot.title = element_text(size = 15, hjust = -2)) +
coord_flip()
satisfaction %>%
ggplot(aes(x = reorder(ï..Service,avg_member_satisfaction),
y = avg_member_satisfaction,
fill = ï..Service,
label = scales::percent(avg_member_satisfaction/100))) +
geom_col() +
scale_fill_manual(values = c('#f5bf42',"#e0582f","#27b850","#b9cf59"),
name = "Service Provided") +
geom_text(nudge_y = -5,
color = "white",
fontface = "bold",
size = 5) +
labs(title = "Top Ranking of Services provided Based on Customer Satisfaction",
caption = "Note: The data used for this image is not actual, but generated for visual purposes") +
theme_classic() +
theme(legend.position = "none",
line = element_blank(),
axis.title = element_blank(),
axis.text.x = element_blank(),
axis.text.y = element_text(size = 12,),
plot.title = element_text(size = 15, hjust = -2)) +
coord_flip()
satisfaction %>%
ggplot(aes(x = reorder(ï..Service,avg_member_satisfaction),
y = avg_member_satisfaction,
fill = ï..Service,
label = scales::percent(avg_member_satisfaction/100))) +
geom_col() +
scale_fill_manual(values = c('#f5bf42',"#e0582f","#27b850","#b9cf59"),
name = "Service Provided") +
geom_text(nudge_y = -5,
color = "white",
fontface = "bold",
size = 5) +
labs(title = "Top Ranking of Services provided Based on Customer Satisfaction",
caption = "Note: The data used for this image is not actual, but generated for visual purposes") +
theme_classic() +
theme(legend.position = "none",
line = element_blank(),
axis.title = element_blank(),
axis.text.x = element_blank(),
axis.text.y = element_text(size = 12,),
plot.title = element_text(size = 15, hjust = -1)) +
coord_flip()
satisfaction %>%
ggplot(aes(x = reorder(ï..Service,avg_member_satisfaction),
y = avg_member_satisfaction,
fill = ï..Service,
label = scales::percent(avg_member_satisfaction/100))) +
geom_col() +
scale_fill_manual(values = c('#f5bf42',"#e0582f","#27b850","#b9cf59"),
name = "Service Provided") +
geom_text(nudge_y = -5,
color = "white",
fontface = "bold",
size = 5) +
labs(title = "Top Ranking of Services provided Based on Customer Satisfaction",
caption = "Note: The data used for this image is not actual, but generated for visual purposes") +
theme_classic() +
theme(legend.position = "none",
line = element_blank(),
axis.title = element_blank(),
axis.text.x = element_blank(),
axis.text.y = element_text(size = 12,),
plot.title = element_text(size = 15, hjust = -1.5)) +
coord_flip()
satisfaction %>%
ggplot(aes(x = reorder(ï..Service,avg_member_satisfaction),
y = avg_member_satisfaction,
fill = ï..Service,
label = scales::percent(avg_member_satisfaction/100))) +
geom_col() +
scale_fill_manual(values = c('#f5bf42',"#e0582f","#27b850","#b9cf59"),
name = "Service Provided") +
geom_text(nudge_y = -6,
color = "white",
fontface = "bold",
size = 5) +
labs(title = "Top Ranking of Services provided Based on Customer Satisfaction",
caption = "Note: The data used for this image is not actual, but generated for visual purposes") +
theme_classic() +
theme(legend.position = "none",
line = element_blank(),
axis.title = element_blank(),
axis.text.x = element_blank(),
axis.text.y = element_text(size = 12,),
plot.title = element_text(size = 15, hjust = -1.5)) +
coord_flip()
library(shiny); runApp('C:/Users/saheb/Projects/BC_Homeless_Counts/code/03_app.R')
runApp('C:/Users/saheb/Projects/BC_Homeless_Counts/code/03_app.R')
runApp('C:/Users/saheb/Projects/BC_Homeless_Counts/code/03_app.R')
runApp('C:/Users/saheb/Projects/BC_Homeless_Counts/code/03_app.R')
library(tidyverse)
library(here)
library(shiny)
library(shinydashboard)
###############################################################################
# Read in the data
# get names of all csv files in clean_data folder
tables <- list.files(path = "data/clean_data",pattern = ".csv")
# read in the csv files and store it
for (i in seq_along(tables)){
assign(paste0("df",i),read_csv(paste0(here(),"/data/clean_data/",tables[i])))
}
install.packages('bcmaps')
library(sf)
installed.packages(sf)
install.packages(sf)
install.packages("sf")
install.packages("sf")
library(sf)
library(bcmaps)
ggplot() +
geom_sf(data = bc_bound())
library(ggplot2)
ggplot() +
geom_sf(data = bc_bound())
install.packages("Rcpp")
ggplot() +
geom_sf(data = bc_bound())
library(ggplot2)
library(sf)
library(bcmaps)
ggplot() +
geom_sf(data = bc_bound())
c(1:11,15)
# clean table3.9 - Length of time in community
table3.9_c <- table3.9[-c(1:11,37,38),]
setwd("C:/Users/saheb/Projects/BC_Homeless_Counts")
library(tidyverse)
library(here)
library(mapquestr)
#------------------
## Import raw data
# get path of current working directory
prj_dir <- here()
# names of data tables pertaining to all communities
names_ls1 <- paste0("table2.",1:23)
# names of data tables gathered across communities
names_ls2 <- paste0("table3.",1:9)
# combine the two lists of names into a single list
table_names <- append(names_ls1,names_ls2)
# read in from csv files and store raw data into data frames
for (i in table_names){
filename <- paste0(prj_dir,"/data/raw_data/",i,".csv")
assign(i,read_csv(filename))
}
table3.1_c <- table3.1[-c(1,2,28,29),-7] %>%
rename("BC_community" = "X",
"Total_Sheltered" = "X.1",
"Percent_Sheltered" = "Sheltered",
"Total_Unsheltered" = "X.2",
"Percent_Unsheltered" = "Unsheltered",
"Total_Respondents_2021" = "X.3",
"Total_Respondents_2018" = "X.4",
"Percent_change" = "X2018") %>%
mutate_at(.vars = vars(starts_with("Total")),
.funs = list(~ as.numeric(gsub(",","",.)))) %>%
mutate_at(.vars = vars(starts_with("Percent")),
.funs = list(~ as.numeric(gsub("%","",.)))) %>%
mutate(address = paste(gsub("/.+","",BC_community),
"British Columbia",
"Canada",
sep = ", "))
# data frame of the addresses
addresses <- table3.1_c$address
my_key = "aGkfDLd1qnbahZI1IGVuNu3QZi9McBIK"
# get coordinates of the different Canadian cities
geocodes <- geocode_mapquest(addresses = addresses,
key = my_key) %>%
as.data.frame()
# join geocodes to table_3.1c
table3.1_c <- left_join(table3.1_c, geocodes, by = "address")
View(table3.1_c)
clean_table_names <- c("table1_c","table2.2_c","table2.4_c","table2.6_c",
"table2.10_c","table2.11_c","table2.12_c","table2.15_c",
"table2.17_c","table2.18_c","table3.1_c")
for (t in clean_table_names){
filename <- paste0("data/clean_data/",t,".csv")
if (!file.exists(filename)){
df <- get(t)
write_csv(df, filename)
}
}
View(table3.9)
# clean table3.9 - length of time in community
table3.9_c <- table3.9[-c(1:11,37,38),]
View(table3.9_c)
# clean table3.9 - length of time in community
table3.9_c <- table3.9[-c(1:11,37,38),] %>%
separate(X.2,
into = c("Total_1to5","Percent_1to5"))
# clean table3.9 - length of time in community
table3.9_c <- table3.9[-c(1:11,37,38),] %>%
separate(X.2,
into = c("Total_1to5","Percent_1to5", convert = TRUE))
# clean table3.9 - length of time in community
table3.9_c <- table3.9[-c(1:11,37,38),] %>%
separate(X.2,
into = c("Total_1to5","Percent_1to5"))
# clean table3.9 - length of time in community
table3.9_c <- table3.9[-c(1:11,37,38),] %>%
separate(X.2,
into = c("Total_1to5","Percent_1to5")) %>%
separate(X.3,
into = c("Total_5to10","Percent_5to10")) %>%
separate(X.4,
into = c("Total_10plus","Percent_10plus")) %>%
separate(X.5,
into = c("Total_always","Percent_always")) %>%
separate(X.6,
into = c("Total_Respondents","Percent_Respondents"))
# clean table3.9 - length of time in community
table3.9_c <- table3.9[-c(1:11,37,38),] %>%
separate(X.2,
into = c("Total_1to5","Percent_1to5")) %>%
separate(X.3,
into = c("Total_5to10","Percent_5to10")) %>%
separate(X.4,
into = c("Total_10plus","Percent_10plus")) %>%
separate(X.5,
into = c("Total_always","Percent_always")) %>%
separate(X.6,
into = c("Total_Respondents","Percent_Respondents")) %>%
rename("Total_under1" = "X.1",
"Percent_under1" = "Under.1")
# clean table3.9 - length of time in community
table3.9_c <- table3.9[-c(1:11,37,38),] %>%
separate(X.2,
into = c("Total_1to5","Percent_1to5")) %>%
separate(X.3,
into = c("Total_5to10","Percent_5to10")) %>%
separate(X.4,
into = c("Total_10plus","Percent_10plus")) %>%
separate(X.5,
into = c("Total_always","Percent_always")) %>%
separate(X.6,
into = c("Total_Respondents","Percent_Respondents")) %>%
rename("Total_under1" = "X.1",
"Percent_under1" = "Under.1") %>%
mutate_at(.vars = vars(starts_with("Total")),
.funs = list(~ as.numeric(gsub(",","",.)))) %>%
mutate_at(.vars = vars(starts_with("Percent")),
.funs = list(~ as.numeric(gsub("%","",.))))
# clean table3.9 - length of time in community
table3.9_c <- table3.9[-c(1:11,37,38),] %>%
separate(X.2,
into = c("Total_1to5","Percent_1to5")) %>%
separate(X.3,
into = c("Total_5to10","Percent_5to10")) %>%
separate(X.4,
into = c("Total_10plus","Percent_10plus")) %>%
separate(X.5,
into = c("Total_always","Percent_always")) %>%
separate(X.6,
into = c("Total_Respondents","Percent_Respondents")) %>%
rename("Total_under1" = "X.1",
"Percent_under1" = "Under.1",
"Do_not_know" = "X.7",
"Total_Homeless_identified" = "X.8") %>%
mutate_at(.vars = vars(starts_with("Total")),
.funs = list(~ as.numeric(gsub(",","",.)))) %>%
mutate_at(.vars = vars(starts_with("Percent")),
.funs = list(~ as.numeric(gsub("%","",.))))
# clean table3.9 - length of time in community
table3.9_c <- table3.9[-c(1:11,37,38),] %>%
separate(X.2,
into = c("Total_1to5","Percent_1to5")) %>%
separate(X.3,
into = c("Total_5to10","Percent_5to10")) %>%
separate(X.4,
into = c("Total_10plus","Percent_10plus")) %>%
separate(X.5,
into = c("Total_always","Percent_always")) %>%
separate(X.6,
into = c("Total_Respondents","Percent_Respondents")) %>%
rename("Total_under1" = "X.1",
"Percent_under1" = "Under.1",
"Do_not_know" = "X.7",
"Total_Homeless_identified" = "X.8") %>%
mutate_at(.vars = vars(starts_with("Total")),
.funs = list(~ as.numeric(gsub(",","",.)))) %>%
mutate_at(.vars = vars(starts_with("Percent")),
.funs = list(~ as.numeric(gsub("%","",.)))) %>%
select(- Percent_Respondents)
# clean table3.9 - length of time in community
table3.9_c <- table3.9[-c(1:11,37,38),] %>%
separate(X.2,
into = c("Total_1to5","Percent_1to5")) %>%
separate(X.3,
into = c("Total_5to10","Percent_5to10")) %>%
separate(X.4,
into = c("Total_10plus","Percent_10plus")) %>%
separate(X.5,
into = c("Total_always","Percent_always")) %>%
separate(X.6,
into = c("Total_Respondents","Percent_Respondents")) %>%
rename("Total_under1" = "X.1",
"Percent_under1" = "Under.1",
"Do_not_know" = "X.7",
"Total_Homeless_Identified" = "X.8") %>%
mutate_at(.vars = vars(starts_with("Total")),
.funs = list(~ as.numeric(gsub(",","",.)))) %>%
mutate_at(.vars = vars(starts_with("Percent")),
.funs = list(~ as.numeric(gsub("%","",.)))) %>%
select(- Percent_Respondents)
# clean table3.9 - length of time in community
table3.9_c <- table3.9[-c(1:11,37,38),] %>%
separate(X.2,
into = c("Total_1to5","Percent_1to5")) %>%
separate(X.3,
into = c("Total_5to10","Percent_5to10")) %>%
separate(X.4,
into = c("Total_10plus","Percent_10plus")) %>%
separate(X.5,
into = c("Total_Always","Percent_Always")) %>%
separate(X.6,
into = c("Total_Respondents","Percent_Respondents")) %>%
rename("BC_community" = "X",
"Total_under1" = "X.1",
"Percent_under1" = "Under.1",
"Do_not_know" = "X.7",
"Total_Homeless_Identified" = "X.8") %>%
mutate_at(.vars = vars(starts_with("Total")),
.funs = list(~ as.numeric(gsub(",","",.)))) %>%
mutate_at(.vars = vars(starts_with("Percent")),
.funs = list(~ as.numeric(gsub("%","",.)))) %>%
select(- Percent_Respondents)
# clean table3.9 - length of time in community
table3.9_c <- table3.9[-c(1:11,37,38),] %>%
separate(X.2,
into = c("Total_1to5","Percent_1to5")) %>%
separate(X.3,
into = c("Total_5to10","Percent_5to10")) %>%
separate(X.4,
into = c("Total_10plus","Percent_10plus")) %>%
separate(X.5,
into = c("Total_Always","Percent_Always")) %>%
separate(X.6,
into = c("Total_Respondents","Percent_Respondents")) %>%
rename("BC_community" = "X",
"Total_Under1" = "X.1",
"Percent_Under1" = "Under.1",
"Do_Not_Know" = "X.7",
"Total_Homeless_Identified" = "X.8") %>%
mutate_at(.vars = vars(starts_with("Total")),
.funs = list(~ as.numeric(gsub(",","",.)))) %>%
mutate_at(.vars = vars(starts_with("Percent")),
.funs = list(~ as.numeric(gsub("%","",.)))) %>%
select(- Percent_Respondents)
#-------------------
## Save cleaned data frames as csv in clean_data folder
clean_table_names <- c("table1_c","table2.2_c","table2.4_c","table2.6_c",
"table2.10_c","table2.11_c","table2.12_c","table2.15_c",
"table2.17_c","table2.18_c","table3.1_c", "table3.9_c")
for (t in clean_table_names){
filename <- paste0("data/clean_data/",t,".csv")
if (!file.exists(filename)){
df <- get(t)
write_csv(df, filename)
}
}
library(shiny); runApp('code/03_app.R')
read_csv("data/clean_data/table1_c.csv")
runApp('code/03_app.R')
runApp('code/03_app.R')
runApp('code/03_app.R')
runApp('code/03_app.R')
library(shiny); runApp('code/03_app.R')
runApp('code/03_app.R')
runApp('03_app.R')
runApp('code/03_app.R')
runApp('code/03_app.R')
library(tidyverse)
library(leaflet)
library(here)
library(shiny)
library(shinydashboard)
runApp('BC_Homeless_Counts')
shiny::runApp('code/BC_Homeless_Counts')
runApp('code/BC_Homeless_Counts')
runApp('code/BC_Homeless_Counts')
runApp('code/BC_Homeless_Counts')
shiny::runApp('code/03_shiny_app')
runApp('code/03_shiny_app')
runApp('code/03_shiny_app')
runApp('code/03_shiny_app')
runApp('code/03_shiny_app')
runApp('code/03_shiny_app')
runApp('code/03_shiny_app')
runApp('code/03_shiny_app')
runApp('code/03_shiny_app')
runApp('code/03_shiny_app')
?addCircleMarkers
runApp('code/03_shiny_app')
runApp('code/03_shiny_app')
shiny::runApp('code/03_shiny_app')
library(htmltools)
runApp('code/03_shiny_app')
runApp('code/03_shiny_app')
runApp('code/03_shiny_app')
runApp('code/03_shiny_app')
shiny::runApp('code/03_shiny_app')
shiny::runApp('code/03_shiny_app')
shiny::runApp('code/03_shiny_app')
runApp('code/03_shiny_app')
runApp('code/03_shiny_app')
shiny::runApp('code/03_shiny_app')
runApp('code/03_shiny_app')
runApp('code/03_shiny_app')
runApp('code/03_shiny_app')
runApp('code/03_shiny_app')
shiny::runApp('code/03_shiny_app')
runApp('code/03_shiny_app')
runApp('code/03_shiny_app')
shiny::runApp('code/03_shiny_app')
runApp()
runApp()
